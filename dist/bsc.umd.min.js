!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("ethers"),require("@ethersproject/logger"),require("@ethersproject/providers"),require("@ethersproject/properties")):"function"==typeof define&&define.amd?define(["exports","ethers","@ethersproject/logger","@ethersproject/providers","@ethersproject/properties"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self)._ethers_bsc={},e.ethers,e.logger$4,e.providers,e.properties)}(this,(function(e,r,t,n,s){"use strict";const o="@ethers-ancillary/bsc@0.0.2",i=new r.ethers.utils.Logger(o),a=[{name:"bsc-mainnet",chainId:56},{name:"bsc-testnet",chainId:97}];function c(e){if(null==e)return null;if("number"==typeof e){const r=a.filter((r=>r.chainId===e));return r.length?{name:r[0].name,chainId:r[0].chainId}:{name:"unknown",chainId:e}}if("string"==typeof e){const r=a.filter((r=>r.name===e));return r.length?{name:r[0].name,chainId:r[0].chainId}:null}if("string"==typeof e.name&&"number"==typeof e.chainId){const r=c(e.name),t=c(e.chainId);if(null==r&&null==t)return{name:e.name,chainId:e.chainId};if(r&&t&&r.name===t.name&&r.chainId===t.chainId)return r}return i.throwArgumentError("network chainId mismatch","network",e)}const u=new r.ethers.utils.Logger(o),l="EVTS3CU31AATZV72YQ55TPGXGMVIFUQ9M9";class p extends r.ethers.providers.EtherscanProvider{constructor(e,t){const n=c(null==e?"bsc-mainnet":e);switch((n||{}).name){case"bsc-mainnet":case"bsc-testnet":break;default:u.throwError("unsupported network",r.ethers.utils.Logger.errors.UNSUPPORTED_OPERATION,{network:e})}super(n,t||l)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"bsc-mainnet":return"http://api.bscscan.com";case"bsc-testnet":return"http://api-testnet.bscscan.com"}return u.throwArgumentError("unsupported network","network",this.network)}isCommunityResource(){return this.apiKey===l}}const d=new t.Logger(o),h="6136201a7bad1500343e248d";class m extends n.PocketProvider{constructor(e,r){const n=c(e||"bsc-mainnet");n||d.throwError("unsupported network",t.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e}),r||(r={applicationId:h,loadBalancer:!0}),super(n,r)}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"bsc-mainnet":n="bsc-mainnet.gateway.pokt.network";break;default:d.throwError("unsupported network",t.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const s={url:`https://${n}/v1/lb/${r.applicationId}`,headers:{}};return null!=r.applicationSecretKey&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===h}}const g=new t.Logger(o);class w extends n.WebSocketProvider{constructor(e,r){const t=new b(e,r);super(`${t.connection.url.replace(/^http/i,"ws")}/ws`,e),s.defineReadOnly(this,"apiKey",t.apiKey)}isCommunityResource(){return!1}}class b extends n.UrlJsonRpcProvider{constructor(e,r){const n=c(e||"bsc-mainnet");switch((n||{}).name){case"bsc-mainnet":case"bsc-testnet":break;default:g.throwError("unsupported network",t.Logger.errors.UNSUPPORTED_OPERATION,{network:e})}null==r&&g.throwError("no default apiKey",t.Logger.errors.INVALID_ARGUMENT,{argument:"apiKey",value:r}),super(n,r)}static getApiKey(e){const r={apiKey:null,region:"nyc"};return"string"==typeof e?r.apiKey=e:(null!=e.apiKey&&(r.apiKey=e.apiKey),null!=e.region&&(r.region=r.region)),null==r.apiKey&&g.throwError("apiKey is invalid",t.Logger.errors.INVALID_ARGUMENT,{argument:"apiKey",value:e}),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"bsc-mainnet":n="bsc/mainnet";break;case"bsc-testnet":n="bsc/testnet";break;default:g.throwError("unsupported network",t.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const s={url:`https://speedy-nodes-${r.region}.moralis.io/${r.apiKey}/${n}`,headers:{}};return s}isCommunityResource(){return!1}}e.BscMoralisProvider=b,e.BscMoralisWebSocketProvider=w,e.BscPocketProvider=m,e.BscscanProvider=p,e.getDefaultProvider=function(e,t){const n=[];return n.push(new p(e,(t||{}).bscscan||void 0)),n.push(new m(e,(t||{}).bscpocket||void 0)),t&&t.bscmoralis&&("string"==typeof t.bscmoralis||t.bscmoralis.apiKey)&&n.push(new b(e,t.bscmoralis)),new r.ethers.providers.FallbackProvider(n,Math.min(n.length,2))},e.getNetwork=c,Object.defineProperty(e,"__esModule",{value:!0})}));
